<div class="p-8">
  <div class="flex flex-col space-y-2 relative rounded-lg bg-white">
    <div class="flex flex-row space-x-2 justify-center p-2">
      <mat-form-field>
        <mat-label>Tìm Kiếm</mat-label>
        <input matInput #input (keyup)="applyFilter($event)" placeholder="Mô Tả">
      </mat-form-field>
      <mat-form-field>
        <mat-label>Tháng</mat-label>
        <mat-select [(ngModel)]="SearchParams.Thang" [ngModelOptions]="{standalone: true}" (selectionChange)="ngOnInit()">
          @for (item of [1,2,3,4,5,6,7,8,9,10,11,12]; track $index) {
            <mat-option [value]="item">{{item}}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    <mat-form-field class="example-form-field">
      <mat-label>Thời Gian Lấy Tổng Cục</mat-label>
      <mat-date-range-input [rangePicker]="rangePicker">
        <input matStartDate placeholder="Start date" [(ngModel)]="Chonngay.Batdau" [ngModelOptions]="{standalone: true}">
        <input matEndDate placeholder="End date" [(ngModel)]="Chonngay.Ketthuc" [ngModelOptions]="{standalone: true}">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="rangePicker"></mat-datepicker-toggle>
      <mat-date-range-picker #rangePicker>
        <mat-date-range-picker-actions>
          <button mat-button matDateRangePickerCancel>Cancel</button>
          <button mat-raised-button color="primary" matDateRangePickerApply (click)="ngOnInit()">Đồng Ý</button>
        </mat-date-range-picker-actions>
      </mat-date-range-picker>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Số Lượng Hiển Thị</mat-label>
      <input (ngModelChange)="ngOnInit()" [(ngModel)]="SearchParams.pageSize" [ngModelOptions]="{standalone: true}"
       type="text" matInput class="w-full px-3 py-2 border border-gray-200 rounded"
        [placeholder]="'Số Lượng Hiển Thị'"/>
    </mat-form-field>
  </div>
  {{TimSP?.Soluong|number:'1.0-2'}} - {{TimSP?.Tongcong|number:'1.0-2'}}
    <div class="">
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="SHD">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Số HD </th>
          <td mat-cell *matCellDef="let row"> {{row.SHD}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Thang">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Tháng </th>
          <td mat-cell *matCellDef="let row"> {{row.Thang}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Ngaytao">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày Tạo </th>
          <td mat-cell *matCellDef="let row"> {{row.Ngaytao|date:'dd/MM/yyyy'}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="TenSP">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Tên Sản Phẩm </th>
          <td mat-cell *matCellDef="let row"> {{row.TenSP}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Soluong">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Số Lượng</th>
          <td mat-cell *matCellDef="let row"> {{row.Soluong}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="DVT">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Đơn Vị Tính </th>
          <td mat-cell *matCellDef="let row"> {{row.DVT}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Giaxuat">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Giá Xuất </th>
          <td mat-cell *matCellDef="let row"> {{row.Giaxuat}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Giavon">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Giá Vốn </th>
          <td mat-cell *matCellDef="let row"> {{row.Giavon}} </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Tongtien">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Tổng Tiền </th>
          <td mat-cell *matCellDef="let row"> {{row.Tongtien}} </td>
          <td mat-footer-cell *matFooterCellDef>
            {{Subtotal(this.ListXuatkho?.items,'Tongtien')|number:'1.0-2'}}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="pageSizeOptions"></mat-paginator>
    </div>
  </div>

  <!-- <button mat-button (click)="saveAsExcelFile()">Save</button> -->
</div>