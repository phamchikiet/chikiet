<div class="grid grid-cols-2">
  <mat-form-field appearance="fill">
    <mat-label>Tháng Lưu</mat-label>
    <input type="text" [(ngModel)]="thangluu" [ngModelOptions]="{standalone: true}"
     matInput class="px-3 py-2 border border-gray-200 rounded"
      [placeholder]="'Tìm kiếm bài viết'" />
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>Năm Lưu</mat-label>
    <input type="text"  [(ngModel)]="namluu" [ngModelOptions]="{standalone: true}" matInput class="px-3 py-2 border border-gray-200 rounded"
      [placeholder]="'Tìm kiếm bài viết'" />
  </mat-form-field>
</div>


<table mat-table [dataSource]="dataSource" matSort>
  <ng-container matColumnDef="ten">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Tên hàng </th>
    <td mat-cell *matCellDef="let row"> {{row.ten}} </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
  <ng-container matColumnDef="shdon">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Số Hoá Đơn </th>
    <td mat-cell *matCellDef="let row"> {{row.shdon}} </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
  <ng-container matColumnDef="sluong">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Số Lượng </th>
    <td mat-cell *matCellDef="let row"> {{row.sluong|number:'1.0-2'}} </td>
    <td mat-footer-cell *matFooterCellDef><span class="font-bold">{{Subtotal(ListChitiet,'sluong')|number:'1.0-2'}}</span> </td>
  </ng-container>
  <ng-container matColumnDef="dgia">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Giá </th>
    <td mat-cell *matCellDef="let row"> {{row.dgia|number:'1.0-2'}} </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
  <ng-container matColumnDef="thtien">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Tổng Tiền </th>
    <td mat-cell *matCellDef="let row"> {{row.thtien|number:'1.0-2'}} </td>
    <td mat-footer-cell *matFooterCellDef><span class="font-bold">{{Subtotal(ListChitiet,'thtien')|number:'1.0-2'}}</span> </td>
  </ng-container>
  <ng-container matColumnDef="Ngay">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày </th>
    <td mat-cell *matCellDef="let row"> {{row.Ngay|date:'dd/MM/yyyy'}} </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
  <ng-container matColumnDef="Loai">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Loại </th>
    <td mat-cell *matCellDef="let row"> {{row.Loai}} </td>
    <td mat-footer-cell *matFooterCellDef></td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
</table>



<div class="flex flex-col space-y-4">
  <div class="flex flex-col space-y-2 bg-white rounded-lg p-2" *ngFor="let item of ListXNT">
    <div class="text-center font-bold">{{item.Ngay}}</div>
    <div class="grid grid-cols-2 gap-4 font-bold" *ngIf="item.Ngay=='27/02/2023'">
      <div class="grid grid-cols-6">
        <span>Tên</span>
        <span>SHD</span>
        <span>Số Lượng</span>
        <span>Giá</span>
        <span>Thành Tiền</span>
        <span>Nhập</span>
      </div>
      <div class="grid grid-cols-6">
        <span>Tên</span>
        <span>SHD</span>
        <span>Số Lượng</span>
        <span>Giá</span>
        <span>Thành Tiền</span>
        <span>Xuất</span>
      </div>
    </div>
    <div class="grid grid-cols-2 gap-4" *ngIf="item.Ngay=='27/02/2023'">
  <!-- <table class="w-1/2 text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
          <tr>
              <th scope="col" class="p-2">
                  Tên
              </th>
              <th scope="col" class="p-2">
                  Số Hoá Đơn
              </th>
              <th scope="col" class="p-2">
                  Số Lượng
              </th>
              <th scope="col" class="p-2">
                  Giá
              </th>
              <th scope="col" class="p-2">
                  Thành Tiền
              </th>
              <th scope="col" class="p-2">
                 Loại
              </th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let item1 of FilterLoai(item.items,'NHAP')" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
              <th class="p-2">
                  {{item1.ten}}
              </th>
              <td class="p-2">
                {{item1.shdon}}
              </td>
              <td class="p-2">
               {{item1.sluong}}
              </td>
              <td class="p-2">
                {{item1.dgia}}
              </td>
              <td class="p-2">
                {{item1.thtien}}
              </td>
              <td class="p-2">
                {{item1.Loai}}
              </td>
          </tr>
      </tbody>
  </table>
  <table class="w-1/2 text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
          <tr>
              <th scope="col" class="p-2">
                  Tên
              </th>
              <th scope="col" class="p-2">
                  Số Hoá Đơn
              </th>
              <th scope="col" class="p-2">
                  Số Lượng
              </th>
              <th scope="col" class="p-2">
                  Giá
              </th>
              <th scope="col" class="p-2">
                  Thành Tiền
              </th>
              <th scope="col" class="p-2">
                 Loại
              </th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let item1 of FilterLoai(item.items,'XUAT')" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
              <th class="p-2">
                  {{item1.ten}}
              </th>
              <td class="p-2">
                {{item1.shdon}}
              </td>
              <td class="p-2">
               {{item1.sluong}}
              </td>
              <td class="p-2">
                {{item1.dgia}}
              </td>
              <td class="p-2">
                {{item1.thtien}}
              </td>
              <td class="p-2">
                {{item1.Loai}}
              </td>
          </tr>
      </tbody>
  </table> -->

      <div class="grid grid-cols-6" *ngFor="let item1 of FilterLoai(item.items,'NHAP')">
          <span>{{item1.ten}}</span>
          <span>{{item1.shdon}}</span>
          <span>{{item1.sluong}}</span>
          <span>{{item1.dgia}}</span>
          <span>{{item1.thtien}}</span>
          <span>{{item1.Loai}}</span>
      </div>

      <div class="grid grid-cols-6" *ngFor="let item2 of FilterLoai(item.items,'XUAT')">
          <span>{{item2.ten}}</span>
          <span>{{item2.shdon}}</span>
          <span>{{item2.sluong}}</span>
          <span>{{item2.dgia}}</span>
          <span>{{item2.thtien}}</span>
          <span>{{item2.Loai}}</span>  
      </div>
    </div>
  </div>
</div>
